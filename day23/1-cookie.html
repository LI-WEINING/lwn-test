<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        // 设置cookie
        // Name    : key
        // Value   : Key的值
        // Domian  : 域名(地址)
        // Path    : 位置
        // Expires/Max-Age :  Session : 保存为时间为（一段时间）
        // Size    : 长度
        // Priority: 优先级

        document.cookie='user1=小李';  // 设置cookie
        document.cookie='user2=小王';  // 设置cookie
        document.cookie='user1=小胡';  // 修改user1cookie值

        // 设置当前领域访问
        document.cookie='user3=小明 ; domain=127.0.0.1';

        // 设置Path位置
        document.cookie='user4=小刘 ; path=/web/';

        // 设置有效值
        var d = new Date();
        d.setDate(d.getDate()+4);
        document.cookie='user=小九; expires='+d;

        // 获取并打印cookie
        var getCookiestr = document.cookie;
        console.log(getCookiestr);
        // 获取user的值
        var arr = getCookiestr.split('; ');
        console.log(arr);
        // 再次分割
        var arr1 = arr[2].split('=');
        console.log(unescape(arr1[1]));



        // escape()加密
        // unescape()解密


        // 封装Cookie函数 ---------------------------- 设置Cookie
        function setCookie(opt){
            if(!opt.key || !opt.val){
                alert('设置失败，缺少必要的参数')
            }
            opt.path = opt.path || '';
            opt.domain = opt.domain || ''; 
            opt.days = opt.days || 0;
            if(opt.days === 0 ){
                document.cookie = opt.key +'='+ escape(opt.val) +'; domain='+opt.domain+'; path='+opt.path;
            }else{
                var d = new Date()
                d.setDate(d.getDate()+opt.days);
                document.cookie = opt.key +'='+ escape(opt.val) +'; domain='+opt.domain+'; path='+opt.path+'; expires='+d;
            }
        }
        // 设置Cookie
        setCookie({
            key:'user',
            val:'小米',
            days:7,
            path: '',
            domain:'',
        })


        // 封装Cookie函数 ---------------------------- 获取Cookie

        function getCookie(key){
            var arr1 = document.cookie.split('; ');
            for (var i = 0 , n= arr1.length; i < n; i++) {
                var arr2 = arr1[i].split('=');
                if(arr2[0] === key){
                    return  unescape(arr2[1]);
                }
            };
            return null;
        };

        console.log(getCookie('user1'));
        console.log(getCookie('user2'));
        console.log(getCookie('user4'));


        // 封装Cookie函数 ---------------------------- 删除Cookie

        function delCookie(key){
            setCookie({
                key:key,
                val:'1',
                days:-5
            });
        }

        delCookie('user');
        
        console.log(123);
        console.log(getCookie('user')+'1234567890');



        // test测试
        setCookie({
            key:'name1',
            val:'aaa',
            days:'2',
            path:'/web/',
            domain:'127.0.0.1'
        })

        setCookie({
            key:'name2',
            val:'bbb',
            days:'2',
            path:'/web/',
            domain:'localhost'
        })

        console.log(getCookie('name1'));
        console.log(getCookie('name2'));


        delCookie('user1'); //可以删除
        delCookie('user2'); //可以删除
        delCookie('user4'); //无法删除









    </script>
</body>
</html>